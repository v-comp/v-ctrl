{"version":3,"file":"index.esm.js","sources":["../src/index.js"],"sourcesContent":["import throttle from 'lodash/throttle'\n\nconst clamp = function (value, min, max) {\n  return Math.max(min, Math.min(value, max))  \n}\n\nconst vCtrlComponent = {\n  name: 'v-ctrl',\n  abstract: true,\n  props: {\n    direction: {\n      type: String,\n      default: 'h'\n    },\n    throttle: {\n      type: Number,\n      default: 80\n    }\n  },\n\n  methods: {\n    onMousedown (e) {\n      e.preventDefault()\n      document.addEventListener('mousemove', this.onMouseMove)\n      document.addEventListener('mouseup', this.onMouseUp)\n      this.updateValue(e)\n    },\n  \n    onMouseMove (e) {\n      e.preventDefault()\n      this.updateValue(e)\n    },\n  \n    onMouseUp (e) {\n      this.updateValue(e)\n      document.removeEventListener('mousemove', this.onMouseMove)\n      document.removeEventListener('mouseup', this.onMouseUp)\n    },\n  \n    updateValue ({ clientX = 0, clientY = 0 } = {}) {\n      const rect = this.$el.getBoundingClientRect()\n      const { left, top, width, height } = rect\n\n      const deltaX = clientX - left\n      const deltaY = clientY - top\n\n      const x = clamp(deltaX / width, 0, 1)\n      const y = clamp(deltaY / height, 0, 1)\n\n      const dir = this.direction\n      // eslint-disable-next-line\n      const data = dir === 'vh' ? { x, y } : (dir === 'v' ? y : x)\n\n      this.$emit('change', data)\n    }\n  },\n\n  render (h) {\n    return this.$slots.default[0]\n  },\n\n  created () {\n    const { direction, onMousedown, onMouseMove } = this\n\n    if (direction === 'hv') {\n      this.direction = 'vh'\n    }\n\n    this.onMousedown = onMousedown.bind(this)\n    this.onMouseMove = throttle(onMouseMove.bind(this), this.throttle)\n  },\n\n  mounted () {\n    this.$el.addEventListener('mousedown', this.onMousedown)\n  },\n\n  destroyed () {\n    this.$el.removeEventListener('mousedown', this.onMousedown)\n  },\n\n  install () {\n    Vue.component(vCtrlComponent.name, vCtrlComponent)\n  }\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  Vue.use(vCtrlComponent)\n}\n\nexport default { vCtrlComponent }\n"],"names":["const"],"mappings":"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"}